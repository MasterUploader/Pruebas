import { Injectable } from '@angular/core';
import { DomSanitizer, SafeHtml } from '@angular/platform-browser';

@Injectable({
  providedIn: 'root'
})
export class ImpresionService {

  constructor(private sanitizer: DomSanitizer) {}

  generarHtmlParaImpresion(tarjeta: any): SafeHtml {
    const nombres = tarjeta.nombre.split(' ');
    const primerNombre = nombres[0];
    const segundoNombre = nombres[1] || '';
    const primerApellido = nombres[2];
    const segundoApellido = nombres.length > 3 ? nombres.slice(3).join(' ') : '';

    const htmlContent = `
      <div style="position: relative; width: 14.9411cm; height: 8.759cm; background-image: url('ruta/a/tu/imagen-de-fondo.jpg'); background-size: cover; font-family: 'Arial', sans-serif;">
        <div style="position: absolute; top: 9.0312cm; left: 86.649cm; font-size: 9pt;">
          ${primerNombre} ${segundoNombre}<br>
          ${primerApellido} ${segundoApellido}
        </div>
        <div style="position: absolute; top: 7.9512cm; left: 87.1975cm; font-size: 7pt;">
          Emisi√≥n: ${tarjeta.fechaEmision}<br>
          Vencimiento: ${tarjeta.fechaVencimiento}
        </div>
      </div>
    `;

    // Sanitizar y retornar el HTML como SafeHtml
    return this.sanitizer.bypassSecurityTrustHtml(htmlContent);
  }
}
