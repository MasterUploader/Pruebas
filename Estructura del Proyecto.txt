public static string FormatJson(string json, int indentationLevel = 4)
{
    try
    {
        using var jsonDoc = JsonDocument.Parse(json);
        string formattedJson = JsonSerializer.Serialize(jsonDoc, new JsonSerializerOptions
        {
            WriteIndented = true,
            Encoder = System.Text.Encodings.Web.JavaScriptEncoder.UnsafeRelaxedJsonEscaping
        });

        string indent = new string(' ', indentationLevel); // Espacios de indentación
        return indent + formattedJson.Replace(Environment.NewLine, Environment.NewLine + indent);
    }
    catch
    {
        return json; // Si el JSON es inválido, devuelve el texto original
    }
}
