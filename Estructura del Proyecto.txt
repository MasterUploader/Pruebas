public async Task InvokeAsync(HttpContext context)
{
    var executionId = Guid.NewGuid().ToString();
    context.Items["ExecutionId"] = executionId;

    var logFileName = $"C:\\Logs\\api_{executionId}_{DateTime.UtcNow:yyyyMMdd_HHmmss}.txt";
    _loggingService.SetLogFilePath(logFileName);

    // Registrar información de la solicitud
    _loggingService.AddLogEntry(_loggingService.FormatRequestInfo(context, executionId));

    await _next(context); // Continuar con la ejecución del request

    // Registrar información de la respuesta
    _loggingService.AddLogEntry(_loggingService.FormatResponseInfo(context, executionId));

    _loggingService.WriteLogsToFile(); // Escribir logs en orden
}
