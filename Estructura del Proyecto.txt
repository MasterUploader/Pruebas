/// <summary>
/// Agrega un log con información del entorno de ejecución.
/// Incluye detalles sobre la API, el entorno, la máquina y la solicitud HTTP.
/// </summary>
/// <param name="applicationName">Nombre de la aplicación o API en ejecución.</param>
/// <param name="environment">Nombre del entorno de despliegue (Development, Staging, Production).</param>
/// <param name="contentRootPath">Ruta raíz del contenido de la aplicación.</param>
public void AddEnvironmentLog(string applicationName, string environment, string contentRootPath)
{
    try
    {
        // Obtiene información del entorno de ejecución y la solicitud HTTP
        string executionId = _httpContextAccessor.HttpContext?.TraceIdentifier ?? "Desconocido";
        string clientIp = _httpContextAccessor.HttpContext?.Connection.RemoteIpAddress?.ToString() ?? "Desconocido";
        string userAgent = _httpContextAccessor.HttpContext?.Request.Headers["User-Agent"].ToString() ?? "Desconocido";
        string machineName = Environment.MachineName;
        string os = Environment.OSVersion.ToString();
        string host = _httpContextAccessor.HttpContext?.Request.Host.ToString() ?? "Desconocido";

        // Formatea la información del entorno para el log
        var formatted = LogFormatter.FormatEnvironmentInfo(
            applicationName, environment, contentRootPath,
            executionId, clientIp, userAgent, machineName, os, host
        ).Indent(LogScope.CurrentLevel);

        // Escribe la información del entorno en el archivo de log actual
        File.AppendAllText(GetCurrentLogFile(), formatted);
    }
    catch (Exception ex)
    {
        // Registra cualquier error interno sin interrumpir la ejecución
        LogInternalError(ex);
    }
}
